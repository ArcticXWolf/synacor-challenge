6000  |      3  32769      8  32768   6011 |      1  32770  32769      1  32769 |  32767     18      2  32769      2 |  32770      9  32768  32768      2        │
6020  |     15  32768  32768      8  32768 |   6041     15  32769   2754      4 |  32769  32768  32769      7  32769 |   6041      1  32768      0      6        │
6040  |   6044      1  32768      1      3 |  32770      3  32769     18      7 |  32768   6057      9  32768  32769 |      1     18      7  32769   6070        │
6060  |      9  32768  32768  32767      1 |  32769  r7     17   6049     18 |      2  32768      9  32769  32769 |  32767     17   6049      1  32769        │
6080  |  32768      3  32768      9  32768 |  32768  32767     17   6049     18 |     11     84    101    115    116 |     32    115    116    114    105        │
6100  |    110    103     35    115    101 |    108    102     45    116    101 |    115    116     32     99    111 |    109    112    108    101    116

We come from a CALL 6049:

# 6049
JMPNZ r0 6057
ADD r0 r1 1
RET

# 6057
JMPNZ r1 6070
ADD r0 r0 32767
SET r1 r7
CALL 6049
RET

# 6070
PUSH r0
ADD r1 r1 32767
CALL 6049
SET r1 r0
POP r0
ADD r0 r0 32767
CALL 6049
RET

---------------
f6049():
  if r0 != 0:
    f6057()
  r0 = r1+1

f6057():
  if r1 != 0:
    f6070()
  r0--
  r1 = r7
  f6049()

f6070():
  push r0
  r1--
  f6049()
  r1 = r0
  pop r0
  r0--
  f6049()
---------------
foo():
  if r1 != 0:
    push r0
    r1--
    if r0 != 0:
        foo()
    r1 = r1+1
    pop r0
    r0--
    if r0 != 0:
        foo()
    r0 = r1+1
  r0--
  r1 = r7
  if r0 != 0:
    foo()
  r0 = r1+1
---------------
foo(4,1)

foo(a,b):
  while a > 0:
    tmp = []
    while b > 0:
      tmp.push(a)
      b--
    a--
    b = MAGIC
  


    if a > 0:
      foo(a,b)
    b++
    a = tmp
    a--
    if a > 0:
      foo(a,b)
    a = b+1
    

Setup for 6049:

PUSH r0 
PUSH r1
PUSH r2
JMPZ r7 5627
PUSH r0
PUSH r1
PUSH r2
SET r0 28858
SET r1 1553
ADD r2 16357 3
CALL 1480
POP r2
POP r1
POP r0
NOOP
NOOP
NOOP
NOOP
NOOP
SET r0 4
SET r1 1
CALL 6049